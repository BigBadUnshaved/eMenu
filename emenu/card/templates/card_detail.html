{% extends "base.html" %}
{% block content %}
<div class="container-fluid">

 <div class="row">
  <div class="col-md-3">
   <div class="border-rectangle-button">
      <a href="{% url 'card-ui-list' %}"></i>Go back to list of menu cards</a>
   </div>
  </div>

  {% if user.is_authenticated and object %}

    <div class="col-md-2">
     <div class="border-rectangle-button">
       <a href="{% url 'card-ui-edit' object.id %}"></i>Edit this menu</a>
     </div>
    </div>

    <button class="btn btn-danger button-form js-tooltip" title="Make a DELETE request on the {{name}} resource" data-toggle="modal" data-target="#deleteModal">Delete this Menu</button>
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body">
            <h4 class="text-center">Are you sure you want to delete this {{object.name}}?</h4>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
	    <form class="button-form" action="{{ request.get_full_path }}" data-method="DELETE">
              <button class="btn btn-danger">Delete</button>
            </form>
          </div>
        </div>
      </div>
    </div>

  {% endif %}
 </div>
</div>
{% if object %}
  <h3>{{object.name}}</h3>
  <h4>{{object.description}}</h4>
  creation date: {{object.creation_date}}<br>
  date of the last change: {{object.last_change_date}}
  
  <div class="default-table">
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Price</th>
          <th>Preparation time</th>
          <th>Vegetarian</th>
          <th>Creation date</th>
          <th>Date of last change</th>
        </tr>
      </thead>
      <tbody>
        {% for dish in object.dishes %}
        <tr>
  	<td>
  	  {% if request.user.is_authenticated %}
  	    <a href="{% url 'dish-ui-detail' dish.id %}">{{dish.name}}</a>
  	  {% else %}
  	    {{dish.name
  	  {% endif %}
  	</td>
  	<td>{{dish.description}}</td>
  	<td>{{dish.price}}</td>
  	<td>{{dish.preparation_time}}</td>
  	<td>{{dish.is_vegetarian|yesno:"yes, no"}}</td>
          <td>{{dish.creation_date}}</td>
          <td>{{dish.last_change_date}}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% else %}
  <h5>This menu card has been deleted</h5>
{% endif %}
{% endblock %}
